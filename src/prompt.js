/* eslint no-console: ["error", {"allow": ["log", "warn", "error"]}] */

var g_stdinResolver = null;

function processStdin(data) {
  if (g_stdinResolver)
    g_stdinResolver(data.toString());
}

function start() {
  process.stdin.on('data', processStdin);
}

function end() {
  process.stdin.end();
  g_stdinResolver = null;
}

function prompt(msg) {
  process.stdin.resume();
  // console.log(msg);
  process.stdout.write(msg + ' ');
  return new Promise(resolve => {
    g_stdinResolver = resolve;
  });
}

module.exports = {
  end,
  prompt,
  start,
}
